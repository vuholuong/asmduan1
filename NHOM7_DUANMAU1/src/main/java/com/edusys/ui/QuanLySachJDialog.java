/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JDialog.java to edit this template
 */
package com.edusys.ui;

import com.edusys.dao.PhieuPhatDAO;
import com.edusys.dao.ChiTietPhieuMuonDAO;
import com.edusys.dao.PhieuMuonSachDAO;
import com.edusys.dao.PhieuTraSachDAO;
import com.edusys.dao.SachDAO;
import com.edusys.entity.ChiTietPhieuMuon;
import com.edusys.entity.PhieuMuonSach;
import com.edusys.entity.PhieuPhat;
import com.edusys.entity.PhieuTraSach;
import com.edusys.entity.Sach;
import com.edusys.utils.MsgBox;
import com.edusys.utils.XDate;
import com.edusys.utils.XImage;
import java.util.List;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author THANH VINH
 */
public class QuanLySachJDialog extends javax.swing.JDialog {
    SachDAO sDAO = new SachDAO();
    PhieuMuonSachDAO pmsDAO = new PhieuMuonSachDAO();
    ChiTietPhieuMuonDAO ctpmDAO = new ChiTietPhieuMuonDAO();
    PhieuTraSachDAO ptsDAO = new PhieuTraSachDAO();
    PhieuPhatDAO ppDAO  = new PhieuPhatDAO();
    int row = -1;
    /**
     * Creates new form QuanLySachJDialog
     */
    public QuanLySachJDialog(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        init();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        Tabs = new javax.swing.JTabbedPane();
        Pan1 = new javax.swing.JPanel();
        Pan1_1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        cboTimKiem = new javax.swing.JComboBox<>();
        txtTimKiem = new javax.swing.JTextField();
        Pan1_2 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblQLsach = new javax.swing.JTable();
        Pan1_3 = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        txtMaSach = new javax.swing.JTextField();
        txtTenSach = new javax.swing.JTextField();
        txtMaLoai = new javax.swing.JTextField();
        txtMaNXB = new javax.swing.JTextField();
        txtNgayXuatBan = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        txtTacGia = new javax.swing.JTextField();
        txtMoTa = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        txtSoLuong = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        txtViTri = new javax.swing.JTextField();
        btnThemS = new javax.swing.JButton();
        btnXoaS = new javax.swing.JButton();
        btnSuaS = new javax.swing.JButton();
        btnLamMoiS = new javax.swing.JButton();
        btnPrevS = new javax.swing.JButton();
        btnNextS = new javax.swing.JButton();
        btnMuonSach = new javax.swing.JButton();
        Pan2 = new javax.swing.JPanel();
        Pan2_1 = new javax.swing.JPanel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        txtMaPM = new javax.swing.JTextField();
        txtMaSach1 = new javax.swing.JTextField();
        txtMaDG = new javax.swing.JTextField();
        txtMaNV = new javax.swing.JTextField();
        txtNgayMuon = new javax.swing.JTextField();
        jLabel16 = new javax.swing.JLabel();
        jLabel18 = new javax.swing.JLabel();
        txtTrangThai = new javax.swing.JTextField();
        jLabel19 = new javax.swing.JLabel();
        txtSoLuong1 = new javax.swing.JTextField();
        jLabel20 = new javax.swing.JLabel();
        txtViTri1 = new javax.swing.JTextField();
        btnThemSM = new javax.swing.JButton();
        btnXoaSM = new javax.swing.JButton();
        btnSuaSM = new javax.swing.JButton();
        btnLamMoiSM = new javax.swing.JButton();
        btnPrevSM = new javax.swing.JButton();
        btnNextSM = new javax.swing.JButton();
        btnInSM = new javax.swing.JButton();
        btnTraSach = new javax.swing.JButton();
        Pan2_2 = new javax.swing.JPanel();
        Pan2_21 = new javax.swing.JPanel();
        txtTim = new javax.swing.JTextField();
        btnTimKiem = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        tblSachMuon = new javax.swing.JTable();
        Pan3 = new javax.swing.JPanel();
        Pan3_1 = new javax.swing.JPanel();
        jLabel21 = new javax.swing.JLabel();
        jLabel22 = new javax.swing.JLabel();
        txtMaPT = new javax.swing.JTextField();
        txtMaPM1 = new javax.swing.JTextField();
        txtNgayTra = new javax.swing.JTextField();
        jLabel25 = new javax.swing.JLabel();
        jLabel27 = new javax.swing.JLabel();
        jLabel28 = new javax.swing.JLabel();
        txtPhiPhat = new javax.swing.JTextField();
        btnThemST = new javax.swing.JButton();
        btnXoaST = new javax.swing.JButton();
        btnSuaST = new javax.swing.JButton();
        btnLamMoiST = new javax.swing.JButton();
        btnPrevST = new javax.swing.JButton();
        btnNextST = new javax.swing.JButton();
        btnInST = new javax.swing.JButton();
        jScrollPane4 = new javax.swing.JScrollPane();
        txtTrangThai1 = new javax.swing.JTextArea();
        Pan3_2 = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tblSachTra = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("EduSys - QUẢN LÝ SÁCH\n");

        jLabel1.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(0, 51, 255));
        jLabel1.setText("QUẢN LÝ SÁCH");

        Tabs.setToolTipText("");

        Pan1_1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Tìm kiếm sách", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        jLabel2.setText("Tìm kiếm sách theo:");

        javax.swing.GroupLayout Pan1_1Layout = new javax.swing.GroupLayout(Pan1_1);
        Pan1_1.setLayout(Pan1_1Layout);
        Pan1_1Layout.setHorizontalGroup(
            Pan1_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1_1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan1_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 750, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(Pan1_1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cboTimKiem, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addContainerGap(16, Short.MAX_VALUE))
        );
        Pan1_1Layout.setVerticalGroup(
            Pan1_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1_1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan1_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(cboTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(txtTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        Pan1_2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Danh sách", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        tblQLsach.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã sách", "Tên sách", "Loại sách", "Tác giả", "Nhà xuất bản", "Mô tả"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblQLsach.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblQLsachMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tblQLsach);

        javax.swing.GroupLayout Pan1_2Layout = new javax.swing.GroupLayout(Pan1_2);
        Pan1_2.setLayout(Pan1_2Layout);
        Pan1_2Layout.setHorizontalGroup(
            Pan1_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1_2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 750, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        Pan1_2Layout.setVerticalGroup(
            Pan1_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1_2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 148, Short.MAX_VALUE)
                .addContainerGap())
        );

        Pan1_3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Thông tin", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        jLabel3.setText("Mã sách:");

        jLabel4.setText("Tên sách:");

        jLabel5.setText("Mã loại");

        jLabel6.setText("Mã nhà xuất bản:");

        jLabel7.setText("Ngày xuất bản:");

        jLabel8.setText("Tác giả:");

        jLabel9.setText("Mô tả:");

        txtTacGia.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtTacGiaActionPerformed(evt);
            }
        });

        txtMoTa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtMoTaActionPerformed(evt);
            }
        });

        jLabel10.setText("Số lượng:");

        jLabel11.setText("Vị trí:");

        btnThemS.setText("Thêm");
        btnThemS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemSActionPerformed(evt);
            }
        });

        btnXoaS.setText("Xóa");
        btnXoaS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXoaSActionPerformed(evt);
            }
        });

        btnSuaS.setText("Sửa");
        btnSuaS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSuaSActionPerformed(evt);
            }
        });

        btnLamMoiS.setText("Làm mới");
        btnLamMoiS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLamMoiSActionPerformed(evt);
            }
        });

        btnPrevS.setText("<<");
        btnPrevS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPrevSActionPerformed(evt);
            }
        });

        btnNextS.setText(">>");
        btnNextS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextSActionPerformed(evt);
            }
        });

        btnMuonSach.setText("Mượn sách");
        btnMuonSach.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMuonSachActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout Pan1_3Layout = new javax.swing.GroupLayout(Pan1_3);
        Pan1_3.setLayout(Pan1_3Layout);
        Pan1_3Layout.setHorizontalGroup(
            Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1_3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(Pan1_3Layout.createSequentialGroup()
                        .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtMaSach)
                            .addComponent(txtTenSach)
                            .addComponent(txtMaLoai)
                            .addComponent(txtMaNXB)))
                    .addGroup(Pan1_3Layout.createSequentialGroup()
                        .addComponent(btnThemS)
                        .addGap(18, 18, 18)
                        .addComponent(btnXoaS)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 10, Short.MAX_VALUE)
                        .addComponent(btnSuaS)
                        .addGap(18, 18, 18)
                        .addComponent(btnLamMoiS)))
                .addGap(65, 65, 65)
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(Pan1_3Layout.createSequentialGroup()
                        .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtNgayXuatBan))
                    .addGroup(Pan1_3Layout.createSequentialGroup()
                        .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabel9, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel8, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 90, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(txtMoTa, javax.swing.GroupLayout.DEFAULT_SIZE, 223, Short.MAX_VALUE)
                            .addComponent(txtTacGia)))
                    .addGroup(Pan1_3Layout.createSequentialGroup()
                        .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(Pan1_3Layout.createSequentialGroup()
                                .addComponent(btnPrevS)
                                .addGap(18, 18, 18)
                                .addComponent(btnNextS))
                            .addGroup(Pan1_3Layout.createSequentialGroup()
                                .addComponent(jLabel10)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtSoLuong, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel11)))
                        .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(Pan1_3Layout.createSequentialGroup()
                                .addGap(17, 17, 17)
                                .addComponent(btnMuonSach))
                            .addGroup(Pan1_3Layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addComponent(txtViTri, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addContainerGap(44, Short.MAX_VALUE))
        );
        Pan1_3Layout.setVerticalGroup(
            Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1_3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(txtMaSach, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtNgayXuatBan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel7))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(txtTenSach, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8)
                    .addComponent(txtTacGia, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(txtMaLoai, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9)
                    .addComponent(txtMoTa, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(txtMaNXB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel10)
                    .addComponent(txtSoLuong, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel11)
                    .addComponent(txtViTri, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(Pan1_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnThemS)
                    .addComponent(btnXoaS)
                    .addComponent(btnSuaS)
                    .addComponent(btnLamMoiS)
                    .addComponent(btnPrevS)
                    .addComponent(btnNextS)
                    .addComponent(btnMuonSach))
                .addContainerGap(24, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout Pan1Layout = new javax.swing.GroupLayout(Pan1);
        Pan1.setLayout(Pan1Layout);
        Pan1Layout.setHorizontalGroup(
            Pan1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(Pan1_1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(Pan1_2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(Pan1_3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        Pan1Layout.setVerticalGroup(
            Pan1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Pan1_1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Pan1_2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Pan1_3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        Tabs.addTab("SÁCH", Pan1);

        Pan2_1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Phiếu mượn sách", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        jLabel12.setText("Mã phiếu mượn:");

        jLabel13.setText("Mã sách:");

        jLabel14.setText("Mã đọc giả:");

        jLabel15.setText("Mã nhân viên:");

        jLabel16.setText("Ngày mượn:");

        jLabel18.setText("Trạng thái:");

        txtTrangThai.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtTrangThaiActionPerformed(evt);
            }
        });

        jLabel19.setText("Số lượng:");

        jLabel20.setText("Vị trí:");

        btnThemSM.setText("Thêm");
        btnThemSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemSMActionPerformed(evt);
            }
        });

        btnXoaSM.setText("Xóa");
        btnXoaSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXoaSMActionPerformed(evt);
            }
        });

        btnSuaSM.setText("Sửa");
        btnSuaSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSuaSMActionPerformed(evt);
            }
        });

        btnLamMoiSM.setText("Làm mới");
        btnLamMoiSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLamMoiSMActionPerformed(evt);
            }
        });

        btnPrevSM.setText("<<");
        btnPrevSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPrevSMActionPerformed(evt);
            }
        });

        btnNextSM.setText(">>");
        btnNextSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextSMActionPerformed(evt);
            }
        });

        btnInSM.setText("In phiếu");
        btnInSM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnInSMActionPerformed(evt);
            }
        });

        btnTraSach.setText("Trả sách");
        btnTraSach.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTraSachActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout Pan2_1Layout = new javax.swing.GroupLayout(Pan2_1);
        Pan2_1.setLayout(Pan2_1Layout);
        Pan2_1Layout.setHorizontalGroup(
            Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2_1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(Pan2_1Layout.createSequentialGroup()
                        .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel12, javax.swing.GroupLayout.DEFAULT_SIZE, 95, Short.MAX_VALUE)
                            .addComponent(jLabel13, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel14, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel15, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtMaPM, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(txtMaSach1, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(txtMaDG)
                            .addComponent(txtMaNV, javax.swing.GroupLayout.Alignment.TRAILING)))
                    .addGroup(Pan2_1Layout.createSequentialGroup()
                        .addComponent(btnThemSM)
                        .addGap(18, 18, 18)
                        .addComponent(btnXoaSM)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnSuaSM)
                        .addGap(18, 18, 18)
                        .addComponent(btnLamMoiSM)))
                .addGap(65, 65, 65)
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(Pan2_1Layout.createSequentialGroup()
                        .addComponent(btnPrevSM)
                        .addGap(18, 18, 18)
                        .addComponent(btnNextSM)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 30, Short.MAX_VALUE)
                        .addComponent(btnInSM)
                        .addGap(18, 18, 18)
                        .addComponent(btnTraSach)
                        .addContainerGap(12, Short.MAX_VALUE))
                    .addGroup(Pan2_1Layout.createSequentialGroup()
                        .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(jLabel19, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(jLabel18, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 90, Short.MAX_VALUE))
                            .addComponent(jLabel16, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(Pan2_1Layout.createSequentialGroup()
                                .addComponent(txtSoLuong1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(22, 22, 22)
                                .addComponent(jLabel20)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(txtViTri1))
                            .addComponent(txtNgayMuon)
                            .addGroup(Pan2_1Layout.createSequentialGroup()
                                .addGap(0, 0, Short.MAX_VALUE)
                                .addComponent(txtTrangThai, javax.swing.GroupLayout.PREFERRED_SIZE, 236, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addContainerGap(35, Short.MAX_VALUE))))
        );
        Pan2_1Layout.setVerticalGroup(
            Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2_1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel12)
                    .addComponent(txtMaPM, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtNgayMuon, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel16))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel13)
                    .addComponent(txtMaSach1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel18)
                    .addComponent(txtTrangThai, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel14)
                    .addComponent(txtMaDG, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel15)
                    .addComponent(txtMaNV, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel19)
                    .addComponent(txtSoLuong1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel20)
                    .addComponent(txtViTri1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 26, Short.MAX_VALUE)
                .addGroup(Pan2_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnThemSM)
                    .addComponent(btnXoaSM)
                    .addComponent(btnSuaSM)
                    .addComponent(btnLamMoiSM)
                    .addComponent(btnPrevSM)
                    .addComponent(btnNextSM)
                    .addComponent(btnInSM)
                    .addComponent(btnTraSach))
                .addGap(22, 22, 22))
        );

        Pan2_2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Danh sách", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        Pan2_21.setBorder(javax.swing.BorderFactory.createTitledBorder("Tìm kiếm phiếu"));

        btnTimKiem.setText("Tìm kiếm");

        javax.swing.GroupLayout Pan2_21Layout = new javax.swing.GroupLayout(Pan2_21);
        Pan2_21.setLayout(Pan2_21Layout);
        Pan2_21Layout.setHorizontalGroup(
            Pan2_21Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2_21Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(txtTim)
                .addGap(18, 18, 18)
                .addComponent(btnTimKiem)
                .addContainerGap())
        );
        Pan2_21Layout.setVerticalGroup(
            Pan2_21Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2_21Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan2_21Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtTim, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnTimKiem))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        tblSachMuon.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã phiếu mượn", "Mã sách", "Mã đọc giả", "Ngày mượn", "Trạng thái"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblSachMuon.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblSachMuonMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tblSachMuon);

        javax.swing.GroupLayout Pan2_2Layout = new javax.swing.GroupLayout(Pan2_2);
        Pan2_2.setLayout(Pan2_2Layout);
        Pan2_2Layout.setHorizontalGroup(
            Pan2_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2_2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan2_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(Pan2_21, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jScrollPane2))
                .addContainerGap())
        );
        Pan2_2Layout.setVerticalGroup(
            Pan2_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, Pan2_2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Pan2_21, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 181, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout Pan2Layout = new javax.swing.GroupLayout(Pan2);
        Pan2.setLayout(Pan2Layout);
        Pan2Layout.setHorizontalGroup(
            Pan2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(Pan2_1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(Pan2_2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        Pan2Layout.setVerticalGroup(
            Pan2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Pan2_1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Pan2_2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        Tabs.addTab("DANH SÁCH MƯỢN", Pan2);

        Pan3_1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Phiếu trả sách", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        jLabel21.setText("Mã phiếu trả:");

        jLabel22.setText("Mã phiếu mượn:");

        jLabel25.setText("Ngày trả:");

        jLabel27.setText("Trạng thái:");

        jLabel28.setText("Phí phạt:");

        txtPhiPhat.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtPhiPhatActionPerformed(evt);
            }
        });

        btnThemST.setText("Thêm");
        btnThemST.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemSTActionPerformed(evt);
            }
        });

        btnXoaST.setText("Xóa");
        btnXoaST.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXoaSTActionPerformed(evt);
            }
        });

        btnSuaST.setText("Sửa");
        btnSuaST.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSuaSTActionPerformed(evt);
            }
        });

        btnLamMoiST.setText("Làm mới");
        btnLamMoiST.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLamMoiSTActionPerformed(evt);
            }
        });

        btnPrevST.setText("<<");
        btnPrevST.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPrevSTActionPerformed(evt);
            }
        });

        btnNextST.setText(">>");
        btnNextST.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextSTActionPerformed(evt);
            }
        });

        btnInST.setText("In phiếu");

        txtTrangThai1.setColumns(20);
        txtTrangThai1.setRows(5);
        jScrollPane4.setViewportView(txtTrangThai1);

        javax.swing.GroupLayout Pan3_1Layout = new javax.swing.GroupLayout(Pan3_1);
        Pan3_1.setLayout(Pan3_1Layout);
        Pan3_1Layout.setHorizontalGroup(
            Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan3_1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, Pan3_1Layout.createSequentialGroup()
                        .addComponent(btnThemST)
                        .addGap(18, 18, 18)
                        .addComponent(btnXoaST)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnSuaST)
                        .addGap(18, 18, 18)
                        .addComponent(btnLamMoiST))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, Pan3_1Layout.createSequentialGroup()
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabel25, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel21, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel22, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 95, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtMaPT, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(txtMaPM1, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(txtNgayTra))))
                .addGap(65, 65, 65)
                .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(Pan3_1Layout.createSequentialGroup()
                        .addComponent(btnPrevST)
                        .addGap(18, 18, 18)
                        .addComponent(btnNextST)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnInST))
                    .addGroup(Pan3_1Layout.createSequentialGroup()
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(Pan3_1Layout.createSequentialGroup()
                                .addGap(1, 1, 1)
                                .addComponent(jLabel27, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jLabel28))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtPhiPhat, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(62, 62, 62))
        );
        Pan3_1Layout.setVerticalGroup(
            Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan3_1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(Pan3_1Layout.createSequentialGroup()
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel21)
                            .addComponent(txtMaPT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel27))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel22)
                            .addComponent(txtMaPM1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel25)
                            .addComponent(txtNgayTra, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtPhiPhat, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel28))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 20, Short.MAX_VALUE)
                .addGroup(Pan3_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnThemST)
                    .addComponent(btnXoaST)
                    .addComponent(btnSuaST)
                    .addComponent(btnLamMoiST)
                    .addComponent(btnPrevST)
                    .addComponent(btnNextST)
                    .addComponent(btnInST))
                .addGap(22, 22, 22))
        );

        Pan3_2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Danh sách", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 1, 12))); // NOI18N

        tblSachTra.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã phiếu trả", "Mã phiếu mượn", "Ngày trả", "Trạng thái", "Phí phạt"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblSachTra.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblSachTraMouseClicked(evt);
            }
        });
        jScrollPane3.setViewportView(tblSachTra);

        javax.swing.GroupLayout Pan3_2Layout = new javax.swing.GroupLayout(Pan3_2);
        Pan3_2.setLayout(Pan3_2Layout);
        Pan3_2Layout.setHorizontalGroup(
            Pan3_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, Pan3_2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane3)
                .addContainerGap())
        );
        Pan3_2Layout.setVerticalGroup(
            Pan3_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan3_2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout Pan3Layout = new javax.swing.GroupLayout(Pan3);
        Pan3.setLayout(Pan3Layout);
        Pan3Layout.setHorizontalGroup(
            Pan3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(Pan3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(Pan3_1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(Pan3_2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        Pan3Layout.setVerticalGroup(
            Pan3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Pan3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Pan3_1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Pan3_2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        Tabs.addTab("DANH SÁCH TRẢ", Pan3);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(311, 311, 311)
                .addComponent(jLabel1)
                .addContainerGap(355, Short.MAX_VALUE))
            .addGroup(layout.createSequentialGroup()
                .addComponent(Tabs, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(Tabs)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void txtTacGiaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtTacGiaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtTacGiaActionPerformed

    private void txtMoTaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtMoTaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtMoTaActionPerformed

    private void txtTrangThaiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtTrangThaiActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtTrangThaiActionPerformed

    private void txtPhiPhatActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtPhiPhatActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtPhiPhatActionPerformed

    private void btnInSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnInSMActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnInSMActionPerformed

    private void tblQLsachMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblQLsachMouseClicked
        // TODO add your handling code here:
        if(evt.getClickCount() == 2){
           this.row = tblQLsach.getSelectedRow();
           this.editS();
        }
    }//GEN-LAST:event_tblQLsachMouseClicked

    private void btnThemSActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemSActionPerformed
        // TODO add your handling code here:
        insertS();
    }//GEN-LAST:event_btnThemSActionPerformed

    private void btnXoaSActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXoaSActionPerformed
        // TODO add your handling code here:
        deleteS();
    }//GEN-LAST:event_btnXoaSActionPerformed

    private void btnSuaSActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSuaSActionPerformed
        // TODO add your handling code here:
        updateS();
    }//GEN-LAST:event_btnSuaSActionPerformed

    private void btnLamMoiSActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLamMoiSActionPerformed
        // TODO add your handling code here:
        clearFormS();
    }//GEN-LAST:event_btnLamMoiSActionPerformed

    private void btnPrevSActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPrevSActionPerformed
        // TODO add your handling code here:
        prevS();
    }//GEN-LAST:event_btnPrevSActionPerformed

    private void btnNextSActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNextSActionPerformed
        // TODO add your handling code here:
        nextS();
    }//GEN-LAST:event_btnNextSActionPerformed

    private void btnMuonSachActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMuonSachActionPerformed
        // TODO add your handling code here:
        String mas = (String)tblQLsach.getValueAt(this.row, 0);
        Sach s = sDAO.selectById(mas);
        txtMaSach1.setText(s.getMasach());
        Tabs.setSelectedIndex(1);
    }//GEN-LAST:event_btnMuonSachActionPerformed

    private void btnThemSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemSMActionPerformed
        // TODO add your handling code here:
        insertSM();
    }//GEN-LAST:event_btnThemSMActionPerformed

    private void btnXoaSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXoaSMActionPerformed
        // TODO add your handling code here:
        deleteSM();
    }//GEN-LAST:event_btnXoaSMActionPerformed

    private void btnSuaSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSuaSMActionPerformed
        // TODO add your handling code here:
        updateSM();
    }//GEN-LAST:event_btnSuaSMActionPerformed

    private void btnLamMoiSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLamMoiSMActionPerformed
        // TODO add your handling code here:
        clearFormSM();
    }//GEN-LAST:event_btnLamMoiSMActionPerformed

    private void btnPrevSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPrevSMActionPerformed
        // TODO add your handling code here:
        prevSM();
    }//GEN-LAST:event_btnPrevSMActionPerformed

    private void btnNextSMActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNextSMActionPerformed
        // TODO add your handling code here:
        nextSM();
    }//GEN-LAST:event_btnNextSMActionPerformed

    private void tblSachMuonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblSachMuonMouseClicked
        // TODO add your handling code here:
        if(evt.getClickCount() == 2){
           this.row = tblSachMuon.getSelectedRow();
           this.editSM();
        }
    }//GEN-LAST:event_tblSachMuonMouseClicked

    private void btnTraSachActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTraSachActionPerformed
        // TODO add your handling code here:
        String mapm = (String)tblSachMuon.getValueAt(this.row, 0);
        ChiTietPhieuMuon ctpm = ctpmDAO.selectById(mapm);
        txtMaPM1.setText(ctpm.getMasach());
        Tabs.setSelectedIndex(2);
    }//GEN-LAST:event_btnTraSachActionPerformed

    private void btnThemSTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemSTActionPerformed
        // TODO add your handling code here:
        insertST();
    }//GEN-LAST:event_btnThemSTActionPerformed

    private void btnXoaSTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXoaSTActionPerformed
        // TODO add your handling code here:
        deleteST();
    }//GEN-LAST:event_btnXoaSTActionPerformed

    private void btnSuaSTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSuaSTActionPerformed
        // TODO add your handling code here:
        updateST();
    }//GEN-LAST:event_btnSuaSTActionPerformed

    private void btnLamMoiSTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLamMoiSTActionPerformed
        // TODO add your handling code here:
        clearFormST();
    }//GEN-LAST:event_btnLamMoiSTActionPerformed

    private void btnPrevSTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPrevSTActionPerformed
        // TODO add your handling code here:
        prevST();
    }//GEN-LAST:event_btnPrevSTActionPerformed

    private void btnNextSTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNextSTActionPerformed
        // TODO add your handling code here:
        nextST();
    }//GEN-LAST:event_btnNextSTActionPerformed

    private void tblSachTraMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblSachTraMouseClicked
        // TODO add your handling code here:
        if(evt.getClickCount() == 2){
           this.row = tblSachTra.getSelectedRow();
           this.editST();
        }
    }//GEN-LAST:event_tblSachTraMouseClicked

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(QuanLySachJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(QuanLySachJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(QuanLySachJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(QuanLySachJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the dialog */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                QuanLySachJDialog dialog = new QuanLySachJDialog(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel Pan1;
    private javax.swing.JPanel Pan1_1;
    private javax.swing.JPanel Pan1_2;
    private javax.swing.JPanel Pan1_3;
    private javax.swing.JPanel Pan2;
    private javax.swing.JPanel Pan2_1;
    private javax.swing.JPanel Pan2_2;
    private javax.swing.JPanel Pan2_21;
    private javax.swing.JPanel Pan3;
    private javax.swing.JPanel Pan3_1;
    private javax.swing.JPanel Pan3_2;
    private javax.swing.JTabbedPane Tabs;
    private javax.swing.JButton btnInSM;
    private javax.swing.JButton btnInST;
    private javax.swing.JButton btnLamMoiS;
    private javax.swing.JButton btnLamMoiSM;
    private javax.swing.JButton btnLamMoiST;
    private javax.swing.JButton btnMuonSach;
    private javax.swing.JButton btnNextS;
    private javax.swing.JButton btnNextSM;
    private javax.swing.JButton btnNextST;
    private javax.swing.JButton btnPrevS;
    private javax.swing.JButton btnPrevSM;
    private javax.swing.JButton btnPrevST;
    private javax.swing.JButton btnSuaS;
    private javax.swing.JButton btnSuaSM;
    private javax.swing.JButton btnSuaST;
    private javax.swing.JButton btnThemS;
    private javax.swing.JButton btnThemSM;
    private javax.swing.JButton btnThemST;
    private javax.swing.JButton btnTimKiem;
    private javax.swing.JButton btnTraSach;
    private javax.swing.JButton btnXoaS;
    private javax.swing.JButton btnXoaSM;
    private javax.swing.JButton btnXoaST;
    private javax.swing.JComboBox<String> cboTimKiem;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JTable tblQLsach;
    private javax.swing.JTable tblSachMuon;
    private javax.swing.JTable tblSachTra;
    private javax.swing.JTextField txtMaDG;
    private javax.swing.JTextField txtMaLoai;
    private javax.swing.JTextField txtMaNV;
    private javax.swing.JTextField txtMaNXB;
    private javax.swing.JTextField txtMaPM;
    private javax.swing.JTextField txtMaPM1;
    private javax.swing.JTextField txtMaPT;
    private javax.swing.JTextField txtMaSach;
    private javax.swing.JTextField txtMaSach1;
    private javax.swing.JTextField txtMoTa;
    private javax.swing.JTextField txtNgayMuon;
    private javax.swing.JTextField txtNgayTra;
    private javax.swing.JTextField txtNgayXuatBan;
    private javax.swing.JTextField txtPhiPhat;
    private javax.swing.JTextField txtSoLuong;
    private javax.swing.JTextField txtSoLuong1;
    private javax.swing.JTextField txtTacGia;
    private javax.swing.JTextField txtTenSach;
    private javax.swing.JTextField txtTim;
    private javax.swing.JTextField txtTimKiem;
    private javax.swing.JTextField txtTrangThai;
    private javax.swing.JTextArea txtTrangThai1;
    private javax.swing.JTextField txtViTri;
    private javax.swing.JTextField txtViTri1;
    // End of variables declaration//GEN-END:variables
    private void init() {
        this.setLocationRelativeTo(null);
        this.setIconImage(XImage.getAppIcon());
        fillTableSach();
        fillTableSachMuon();
        fillTableSachTra();
        this.row = -1;
        this.updateStatus();
    }
    void fillTableSach() {
        DefaultTableModel model = (DefaultTableModel) tblQLsach.getModel();
        model.setRowCount(0); // xoá tất cả các hàng trên Jtable
        List<Object[]> list = sDAO.getBangSach();
        for(Object[] row : list){
            model.addRow(row);
        }
    }
    void updateStatus() {
        boolean edit = (this.row >=0);
        boolean first = (this.row == 0);
        boolean last = (this.row == tblQLsach.getRowCount() - 1);
        
        // Trạng thái form
       txtMaSach.setEditable(!edit);
       btnThemS.setEnabled(!edit);
       btnSuaS.setEnabled(edit);
       btnXoaS.setEnabled(edit);
       
       //Trạng thái điều hướng
       btnPrevS.setEnabled(edit && !first);
       btnNextS.setEnabled(edit && !last);
    }
    void setFormS(Sach s){
        txtMaSach.setText(s.getMasach());
        txtTenSach.setText(s.getTensach());
        txtMaLoai.setText(s.getMaloai());
        txtMaNXB.setText(s.getManxb());
        txtNgayXuatBan.setText(XDate.toString(s.getNgayxuatban(), "yyyy/MM/dd"));
        txtTacGia.setText(s.getTacgia());
        txtMoTa.setText(s.getMota());
        txtSoLuong.setText(String.valueOf(s.getSoluong()));
        txtViTri.setText(s.getVitri());
    }
    Sach getFormS(){
        Sach s = new Sach();
        s.setMasach(txtMaSach.getText());
        s.setTensach(txtTenSach.getText());
        s.setMaloai(txtMaLoai.getText());
        s.setManxb(txtMaNXB.getText());
        s.setNgayxuatban(XDate.toDate(txtNgayXuatBan.getText(), "yyyy/MM/dd"));
        s.setTacgia(txtTacGia.getText());
        s.setMota(txtMoTa.getText());
        s.setSoluong(Integer.parseInt(txtSoLuong.getText()));
        s.setVitri(txtViTri.getText());
        return s;
    }
    void clearFormS(){
        Sach s = new Sach();
        this.setFormS(s);
        this.row = -1;
        this.updateStatus();
    }
    void editS(){
        String mas = (String)tblQLsach.getValueAt(this.row, 0);
        Sach s = sDAO.selectById(mas);
        this.setFormS(s);
        this.updateStatus();
    }
    void insertS(){
        Sach s = getFormS();
            try {
                sDAO.insert(s);
                this.fillTableSach();
                this.clearFormS();
                MsgBox.alert(this, "Thêm mới thành công!");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Thêm mới thất bại");
            }
    }
    void updateS(){
        Sach s = getFormS();
            try {
                sDAO.update(s);
                this.fillTableSach();
                this.clearFormS();
                MsgBox.alert(this, "Cập nhập thành công!");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Cập nhập thất bại");
            }
    }
    void deleteS(){
        String s = txtMaSach.getText();
            try {
                sDAO.delete(s);
                this.fillTableSach();
                this.clearFormS();
                MsgBox.alert(this, "Xoá thành công");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Xoá thất bại");
            }
    }
    void nextS(){
        if(this.row < tblQLsach.getRowCount() -1){
            this.row++;
            this.editS();
        }
    }
    void prevS(){
        if(this.row > 0){
            this.row--;
            this.editS();
        }
    }
    
    //Phần phiếu mượn sách.
    void fillTableSachMuon() {
        DefaultTableModel model = (DefaultTableModel) tblSachMuon.getModel();
        model.setRowCount(0); // xoá tất cả các hàng trên Jtable
        List<Object[]> list = pmsDAO.getBangSachMuon();
        for(Object[] row : list){
            model.addRow(row);
        }
    }
    void setFormSM(PhieuMuonSach pms){
        txtMaNV.setText(pms.getManv());
        txtMaDG.setText(pms.getMadg());
        txtNgayMuon.setText(XDate.toString(pms.getNgaymuon(), "yyyy/MM/dd"));
        txtTrangThai.setText(pms.getTrangthai());
        txtSoLuong.setText(String.valueOf(pms.getSoluong()));
    }
    void setFormCTPM (ChiTietPhieuMuon ctpm){
        txtMaPM.setText(ctpm.getMapm());
        txtMaSach1.setText(ctpm.getMasach());
    }
    PhieuMuonSach getFormSM(){
        PhieuMuonSach pms = new PhieuMuonSach();
        pms.setMapm(txtMaPM.getText());
        pms.setManv(txtMaNV.getText());
        pms.setMadg(txtMaDG.getText());
        pms.setNgaymuon(XDate.toDate(txtNgayMuon.getText(), "yyyy/MM/dd"));
        pms.setTrangthai(txtTrangThai.getText());
        pms.setSoluong(Integer.parseInt(txtSoLuong.getText()));
        return pms;
    }
    void clearFormSM(){
        PhieuMuonSach pms = new PhieuMuonSach();
        this.setFormSM(pms);
        this.row = -1;
        this.updateStatus();
    }
    void editSM(){
        String mapm = (String)tblSachMuon.getValueAt(this.row, 0);
        PhieuMuonSach pms = pmsDAO.selectById(mapm);
        ChiTietPhieuMuon ctpm = ctpmDAO.selectById(mapm);
        this.setFormSM(pms);
        this.setFormCTPM(ctpm);
        this.updateStatus();
    }
    void insertSM(){
        PhieuMuonSach pms = getFormSM();
            try {
                pmsDAO.insert(pms);
                this.fillTableSachMuon();
                this.clearFormSM();
                MsgBox.alert(this, "Thêm mới thành công!");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Thêm mới thất bại");
            }
    }
    void updateSM(){
        PhieuMuonSach pms = getFormSM();
            try {
                pmsDAO.update(pms);
                this.fillTableSachMuon();
                this.clearFormSM();
                MsgBox.alert(this, "Cập nhập thành công!");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Cập nhập thất bại");
            }
    }
    void deleteSM(){
        String pms = txtMaSach1.getText();
            try {
                pmsDAO.delete(pms);
                this.fillTableSachMuon();
                this.clearFormSM();
                MsgBox.alert(this, "Xoá thành công");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Xoá thất bại");
            }
    }
    void nextSM(){
        if(this.row < tblSachMuon.getRowCount() -1){
            this.row++;
            this.editSM();
        }
    }
    void prevSM(){
        if(this.row > 0){
            this.row--;
            this.editSM();
        }
    }
    
    //Phần phiếu trả sách.
    void fillTableSachTra() {
        DefaultTableModel model = (DefaultTableModel) tblSachTra.getModel();
        model.setRowCount(0); // xoá tất cả các hàng trên Jtable
        List<Object[]> list = ptsDAO.getBangSachTra();
        for(Object[] row : list){
            model.addRow(row);
        }
    }
    void setFormST(PhieuTraSach pts){
        txtMaPT.setText(pts.getMapt());
        txtMaPM1.setText(pts.getMapm());
        txtNgayTra.setText(XDate.toString(pts.getNgaytra(), "yyyy/MM/dd"));
        txtTrangThai1.setText(pts.getTrangthai());
    }
    void setFormPhiPhat(PhieuPhat pp){
        txtPhiPhat.setText(String.valueOf(pp.getPhiphat()));
    }
    PhieuTraSach getFormST(){
        PhieuTraSach pts = new PhieuTraSach();
        pts.setMapt(txtMaPM.getText());
        pts.setMapm(txtMaNV.getText());
        pts.setNgaytra(XDate.toDate(txtNgayMuon.getText(), "yyyy/MM/dd"));
        pts.setTrangthai(txtTrangThai1.getText());
        return pts;
    }
    void clearFormST(){
        PhieuTraSach pts = new PhieuTraSach();
        this.setFormST(pts);
        this.row = -1;
        this.updateStatus();
    }
    void editST(){
        String mapt = (String)tblSachTra.getValueAt(this.row, 0);
        PhieuTraSach pts = ptsDAO.selectById(mapt);
        PhieuPhat pp = ppDAO.selectById(mapt);
        this.setFormST(pts);
        this.setFormPhiPhat(pp);
        this.updateStatus();
    }
    void insertST(){
        PhieuTraSach pts = getFormST();
            try {
                ptsDAO.insert(pts);
                this.fillTableSachMuon();
                this.clearFormSM();
                MsgBox.alert(this, "Thêm mới thành công!");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Thêm mới thất bại");
            }
    }
    void updateST(){
        PhieuTraSach pts = getFormST();
            try {
                ptsDAO.update(pts);
                this.fillTableSachTra();
                this.clearFormST();
                MsgBox.alert(this, "Cập nhập thành công!");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Cập nhập thất bại");
            }
    }
    void deleteST(){
        String pts = txtMaPT.getText();
            try {
                ptsDAO.delete(pts);
                this.fillTableSachTra();
                this.clearFormST();
                MsgBox.alert(this, "Xoá thành công");
            } catch (Exception e) {
                e.printStackTrace();
                MsgBox.alert(this, "Xoá thất bại");
            }
    }
    void nextST(){
        if(this.row < tblSachTra.getRowCount() -1){
            this.row++;
            this.editST();
        }
    }
    void prevST(){
        if(this.row > 0){
            this.row--;
            this.editST();
        }
    }
//    void fillTable() {
//        DefaultTableModel model = (DefaultTableModel) tblSachMuon.getModel();
//        model.setRowCount(0); // xoá tất cả các hàng trên Jtable
//        try {
//            List<PhieuMuonSach> list = pmsDAO.selectAll();
//            for(PhieuMuonSach pms : list){
//                Object[] row = {
//                    pms.getMapm(),
//                    pms.getMasach(),
//                    pms.getManv(),
//                    pms.getMadg(),
//                    pms.getTrangthai(),
//                    pms.getNgaymuon(),
//                    pms.getSoluong()};
//                model.addRow(row);
//            }
//        } catch (Exception e) {
//            MsgBox.alert(this, "Lỗi truy vấn dữ liệu");
//        }
//    }
}
